[gd_scene load_steps=24 format=3 uid="uid://6pcocsfpfhsy"]

[ext_resource type="PackedScene" uid="uid://dxrrerr5bo4jq" path="res://Scenes/water_body.tscn" id="1_2h55a"]
[ext_resource type="PackedScene" uid="uid://clxrufp2gfhb2" path="res://Scenes/hud.tscn" id="1_nrjld"]
[ext_resource type="Script" path="res://Scripts/game.gd" id="1_uraxx"]
[ext_resource type="PackedScene" uid="uid://h226rc4u0u8i" path="res://Scenes/player.tscn" id="2_3m4wa"]
[ext_resource type="PackedScene" uid="uid://eqypoyb5ohmw" path="res://Scenes/map.tscn" id="3_2npin"]
[ext_resource type="Texture2D" uid="uid://cxh3r16ml5a3l" path="res://Sprites/mapx2_newVersion.png" id="4_es06s"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="5_ha2y5"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="6_mhwr4"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="7_d3870"]
[ext_resource type="PackedScene" uid="uid://d3tkk3ip5don2" path="res://Scenes/urchin.tscn" id="10_dxaiu"]
[ext_resource type="PackedScene" uid="uid://y3e134yu3em6" path="res://Scenes/coin.tscn" id="10_mehoh"]
[ext_resource type="PackedScene" uid="uid://tqm6s562tnb7" path="res://Scenes/diodon.tscn" id="11_ltnvu"]
[ext_resource type="PackedScene" uid="uid://c0gufep1x1wet" path="res://Scenes/God.tscn" id="11_xjrug"]
[ext_resource type="AudioStream" uid="uid://d7d2plglxi1t" path="res://SFX/Sounds/445244__matrixxx__vibrations-01.mp3" id="13_nvj5j"]
[ext_resource type="AudioStream" uid="uid://gvjhlr5drlcl" path="res://SFX/Sounds/434978__felixblume__water-splash.mp3" id="13_qme6o"]
[ext_resource type="AudioStream" uid="uid://dxkybxn5bq787" path="res://SFX/Sounds/lake-wavelet-27909.mp3" id="14_0qdnv"]

[sub_resource type="Resource" id="Resource_o2xsg"]
script = ExtResource("6_mhwr4")
duration = 1.0
transition = 1
ease = 2

[sub_resource type="Curve2D" id="Curve2D_c854m"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -115, 41, 0, 0, 0, 0, 49.3429, 40.9746, 0, 0, 0, 0, 64.5561, 40.5779, 0, 0, 0, 0, 90, 41)
}
point_count = 4

[sub_resource type="Curve2D" id="Curve2D_i1qeh"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 326, 42, 0, 0, 0, 0, 148, 42)
}
point_count = 2

[sub_resource type="Curve2D" id="Curve2D_uqnoe"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 439, -299, 0, 0, 0, 0, 151, -299)
}
point_count = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jqhq8"]
size = Vector2(272, 24)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4gu60"]
size = Vector2(16, 49)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rn5n3"]
size = Vector2(308, 9)

[node name="Game" type="Node2D"]
position = Vector2(24, -16)
script = ExtResource("1_uraxx")

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -1590.0
offset_top = -1350.0
offset_right = 1416.0
offset_bottom = -676.0
color = Color(0.32549, 0.462745, 0.713726, 1)

[node name="WaterBody" parent="." instance=ExtResource("1_2h55a")]
position = Vector2(-192, -696)
scale = Vector2(1.33372, 1.20018)
distance_between_springs = 30
spring_number = 100
depth = 1000000

[node name="Map" parent="." instance=ExtResource("3_2npin")]
texture = ExtResource("4_es06s")

[node name="God" parent="." instance=ExtResource("11_xjrug")]
position = Vector2(344, -960)

[node name="Player" parent="." groups=["player"] instance=ExtResource("2_3m4wa")]
position = Vector2(407, -921)
initTimerOxygen = 200

[node name="PhantomCamera2D" type="Node2D" parent="." node_paths=PackedStringArray("follow_target")]
position = Vector2(407, -921)
script = ExtResource("5_ha2y5")
follow_mode = 1
follow_target = NodePath("../Player")
zoom = Vector2(0.6, 0.6)
snap_to_pixel = true
tween_resource = SubResource("Resource_o2xsg")
tween_on_load = false
follow_offset = Vector2(0, 150)
follow_damping = true
follow_damping_value = Vector2(0.3, 0.3)
dead_zone_width = 0.22
dead_zone_height = 0.25
show_viewfinder_in_play = true

[node name="Camera2D" type="Camera2D" parent="."]
physics_interpolation_mode = 1
position = Vector2(407, -921)
zoom = Vector2(0.6, 0.6)

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
script = ExtResource("7_d3870")

[node name="CanvasLayer" type="CanvasLayer" parent="Camera2D"]

[node name="HUD" parent="Camera2D/CanvasLayer" instance=ExtResource("1_nrjld")]

[node name="coins" type="Node2D" parent="."]
position = Vector2(-242, -255)

[node name="coin" parent="coins" instance=ExtResource("10_mehoh")]
position = Vector2(356, -261)

[node name="Paths" type="Node2D" parent="."]

[node name="PathUrchin1" type="Path2D" parent="Paths"]
position = Vector2(0, -3)
curve = SubResource("Curve2D_c854m")

[node name="PathFollow2D" type="PathFollow2D" parent="Paths/PathUrchin1"]
position = Vector2(-115, 41)
rotation = -0.000154544
loop = false

[node name="PathUrchin2" type="Path2D" parent="Paths"]
position = Vector2(0, -4)
curve = SubResource("Curve2D_i1qeh")

[node name="PathFollow2D" type="PathFollow2D" parent="Paths/PathUrchin2"]
position = Vector2(326, 42)
rotation = 3.14159
loop = false

[node name="PathDiodon1" type="Path2D" parent="Paths"]
position = Vector2(336, 687)
curve = SubResource("Curve2D_uqnoe")

[node name="PathFollow2D" type="PathFollow2D" parent="Paths/PathDiodon1"]
position = Vector2(439, -299)
rotation = 3.14159
loop = false

[node name="Ennemies" type="Node2D" parent="."]

[node name="Urchin" parent="Ennemies" node_paths=PackedStringArray("pathFollow") instance=ExtResource("10_dxaiu")]
position = Vector2(-117, 41)
pathFollow = NodePath("../../Paths/PathUrchin1/PathFollow2D")

[node name="Urchin2" parent="Ennemies" node_paths=PackedStringArray("pathFollow") instance=ExtResource("10_dxaiu")]
position = Vector2(328.755, 41)
pathFollow = NodePath("../../Paths/PathUrchin2/PathFollow2D")

[node name="Diodon" parent="Ennemies" node_paths=PackedStringArray("pathFollow") instance=ExtResource("11_ltnvu")]
position = Vector2(483, 388)
pathFollow = NodePath("../../Paths/PathDiodon1/PathFollow2D")
loop = true
startFollowPath = true
speed = 0.1

[node name="Triggers" type="Node2D" parent="."]

[node name="TriggerStart" type="Area2D" parent="Triggers"]
scale = Vector2(0.99853, 0.98633)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Triggers/TriggerStart"]
position = Vector2(112, 83)
shape = SubResource("RectangleShape2D_jqhq8")

[node name="TriggerImpactStart" type="Area2D" parent="Triggers"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Triggers/TriggerImpactStart"]
position = Vector2(115, 40.5)
shape = SubResource("RectangleShape2D_4gu60")

[node name="AudioImpact" type="AudioStreamPlayer2D" parent="Triggers/TriggerImpactStart"]
position = Vector2(116, 40)
stream = ExtResource("13_nvj5j")
volume_db = 10.0
max_distance = 1000.0
attenuation = 11.7127
panning_strength = 1.5
bus = &"SFX"

[node name="TriggerWaterZone" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="TriggerWaterZone"]
position = Vector2(117, -685)
shape = SubResource("RectangleShape2D_rn5n3")

[node name="AudioSplash" type="AudioStreamPlayer2D" parent="."]
position = Vector2(112, -698)
stream = ExtResource("13_qme6o")
volume_db = -10.0
max_distance = 500.0
attenuation = 9.0
panning_strength = 1.5

[node name="AudioPointWater" type="AudioStreamPlayer2D" parent="."]
position = Vector2(4, -728)
stream = ExtResource("14_0qdnv")
autoplay = true
max_distance = 1000.0
attenuation = 9.0
panning_strength = 1.5
bus = &"SFX"

[node name="AudioPointWater2" type="AudioStreamPlayer2D" parent="."]
position = Vector2(212, -732)
stream = ExtResource("14_0qdnv")
autoplay = true
max_distance = 1000.0
attenuation = 9.0
panning_strength = 1.5
bus = &"SFX"

[connection signal="body_entered" from="Triggers/TriggerStart" to="." method="_on_trigger_start_body_entered"]
[connection signal="body_entered" from="Triggers/TriggerImpactStart" to="." method="_on_trigger_impact_start_body_entered"]
[connection signal="body_entered" from="TriggerWaterZone" to="." method="_on_trigger_water_zone_body_entered"]
